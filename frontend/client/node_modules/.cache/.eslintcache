[{"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/inicio.jsx":"1","/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/cuenta.jsx":"2","/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/reservar.jsx":"3","/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/login/login_admin.jsx":"4","/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/login/Register_cliente.jsx":"5","/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/login/login_cliente.jsx":"6","/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/editar_hoteles.jsx":"7","/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/App.js":"8","/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/index.js":"9","/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/insert_hoteles.jsx":"10","/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/ver_hoteles.jsx":"11","/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/ver_clientes.jsx":"12","/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/ver_reservas.jsx":"13"},{"size":9399,"mtime":1699299230637,"results":"14","hashOfConfig":"15"},{"size":3258,"mtime":1699291462793,"results":"16","hashOfConfig":"15"},{"size":7328,"mtime":1699302994371,"results":"17","hashOfConfig":"15"},{"size":3157,"mtime":1699286417466,"results":"18","hashOfConfig":"15"},{"size":5441,"mtime":1699285878960,"results":"19","hashOfConfig":"15"},{"size":4765,"mtime":1699307925518,"results":"20","hashOfConfig":"15"},{"size":5809,"mtime":1699295735257,"results":"21","hashOfConfig":"15"},{"size":2995,"mtime":1699295369920,"results":"22","hashOfConfig":"15"},{"size":507,"mtime":1699295597551,"results":"23","hashOfConfig":"15"},{"size":4386,"mtime":1699306699284,"results":"24","hashOfConfig":"15"},{"size":2079,"mtime":1699306210392,"results":"25","hashOfConfig":"15"},{"size":1539,"mtime":1699299402771,"results":"26","hashOfConfig":"15"},{"size":2612,"mtime":1699307695013,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","suppressedMessages":"30","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"1rxvg7k",{"filePath":"31","messages":"32","suppressedMessages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","suppressedMessages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"38"},{"filePath":"39","messages":"40","suppressedMessages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","suppressedMessages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"45","messages":"46","suppressedMessages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","suppressedMessages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"51","messages":"52","suppressedMessages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","suppressedMessages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","suppressedMessages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"60","messages":"61","suppressedMessages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"63","messages":"64","suppressedMessages":"65","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","suppressedMessages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/inicio.jsx",["69","70","71","72"],[],"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/cuenta.jsx",[],[],"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/reservar.jsx",["73"],[],"import React, { useContext, useEffect, useState } from 'react';\r\nimport { AuthContext } from './login/auth';\r\nimport { useParams } from 'react-router-dom';\r\nimport './estilo/reservar.css';\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\nconst Cookie = new Cookies()\r\n\r\nconst notifyBooked = () => {\r\n  toast.success(\"Reservado!\", {\r\n      pauseOnHover: false,\r\n      autoClose: 2000,\r\n  })\r\n}\r\n\r\nconst notifyError = () => {\r\n  toast.error(\"Hotel no disponible para reserva en fecha seleccionada!\", {\r\n      pauseOnHover: false,\r\n      autoClose: 2000,\r\n  })\r\n}\r\n\r\nfunction convertirFecha(fecha) {\r\n  let fechaString = fecha.toString()\r\n  let year = fechaString.substring(0,4)\r\n  let month = fechaString.substring(5,7)\r\n  let day = fechaString.substring(8,10)\r\n  let yearPlusMonth = year.concat(\"\",month)\r\n  let fechaStringFinal = yearPlusMonth.concat(\"\",day)\r\n  var fechaEntero = Number(fechaStringFinal)\r\n\r\n  console.log(fechaEntero)\r\n\r\n  return fechaEntero\r\n}\r\n\r\n\r\nconst ReservaPage = () => {\r\n  const { hotelId } = useParams();\r\n  const [hotelData, setHotelData] = useState('');\r\n  const { isLoggedCliente } = useContext(AuthContext);\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  // const accountId = localStorage.getItem(\"id_cliente\");\r\n  const accountId = Cookie.get(\"user_id\");\r\n\r\n  const Verificacion = () => {\r\n    if (!isLoggedCliente) {\r\n      window.location.href = '/login-cliente';\r\n    }\r\n  };\r\n\r\n  const handleReserva = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // const startDateObj = new Date(startDate);\r\n    // const endDateObj = new Date(endDate);\r\n    // const Dias = Math.round((endDateObj - startDateObj) / (1000 * 60 * 60 * 24));\r\n    const formData = {\r\n      //booked_hotel_id: parseInt(hotelId),\r\n      booked_hotel_id: hotelId,\r\n      user_booked_id: parseInt(accountId),\r\n      start_date: convertirFecha(startDate),\r\n      end_date: convertirFecha(endDate)\r\n      // anio_inicio: startDateObj.getFullYear(),\r\n      // anio_final: endDateObj.getFullYear(),\r\n      // mes_inicio: startDateObj.getMonth() + 1, \r\n      // mes_final: endDateObj.getMonth() + 1, \r\n      // dia_inicio: startDateObj.getDate() + 1,\r\n      // dia_final: endDateObj.getDate() + 1,\r\n      // dias: Dias\r\n    };\r\n\r\n    console.log(formData)\r\n\r\n    fetch('http://localhost:8070/booking', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(formData)\r\n    }).then(response => {\r\n\r\n      if (response.status === 400 || response.status === 401 || response.status === 403) {\r\n        console.log(\"Error al reservar\");\r\n\r\n            notifyError();\r\n\r\n        return response.json();\r\n\r\n    } else {\r\n        console.log(\"Booking added\");\r\n\r\n        notifyBooked();\r\n\r\n        return response.json();\r\n    }\r\n\r\n\r\n\r\n      });\r\n  }\r\n  const idHotel = hotelId;\r\n\r\n  useEffect(() => {\r\n\r\n    setHotelData('');\r\n    if (hotelId){\r\n      fetch(`http://localhost:8060/hotels/${idHotel}`)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data.images[1])\r\n\r\n        if (data.images && typeof data.images === 'string') {\r\n          data.images = JSON.parse(data.images); // Convert the string to an array\r\n        }\r\n        console.log(data.images)\r\n\r\n        setHotelData(data);\r\n\r\n        console.log(hotelData)\r\n      })\r\n      .catch(error => {\r\n        console.error('Error al obtener datos del hotel: ', error)\r\n      })\r\n\r\n    }\r\n\r\n  }, []);\r\n\r\n /*  const getHotel = async () => {\r\n    try {\r\n      const request = await fetch(`http://localhost:8060/hotels/${id}`);  // Traigo el hotel de mongo\r\n      const response = await request.json();\r\n      setHotelData(response);\r\n    } catch (error) {\r\n      console.log(\"No se pudieron obtener los hoteles:\", error);\r\n    }\r\n  }; */\r\n\r\n  // useEffect(() => {\r\n  //   setHotelData('');\r\n  //   if (hotelId) {\r\n  //     fetch(`http://localhost:8090/cliente/hotel/${hotelId}`)\r\n  //       .then(response => response.json())\r\n  //       .then(data => {\r\n  //         setHotelData(data);\r\n  //       })\r\n  //       .catch(error => {\r\n  //         console.error('Error al obtener los datos del cliente:', error);\r\n  //       });\r\n  //   }\r\n // }, [hotelId]);\r\n\r\n  const handleStartDateChange = (event) => {\r\n    setStartDate(event.target.value);\r\n    const startDateObj = new Date(event.target.value);\r\n    const endDateObj = new Date(endDate);\r\n    if (startDateObj > endDateObj) {\r\n      setEndDate('');\r\n      alert(\"Fechas no vÃ¡lidas\");\r\n      notifyError();\r\n    }\r\n    if (startDate && endDate) {\r\n      filterHotels();\r\n    }\r\n  };\r\n\r\n  const handleEndDateChange = (event) => {\r\n    setEndDate(event.target.value);\r\n    const startDateObj = new Date(startDate);\r\n    const endDateObj = new Date(event.target.value);\r\n    if (startDateObj > endDateObj) {\r\n      setEndDate('');\r\n      alert(\"Fechas no vÃ¡lidas\");\r\n    }\r\n    if (startDate && endDate) {\r\n      filterHotels();\r\n    }\r\n  };\r\n\r\n  const filterHotels = async () => {\r\n    const request = await fetch(`http://localhost:8070/hotel/availability/${hotelId}/${startDate}/${endDate}`);\r\n    // /hotel/availability/:id/:start_date/:end_date\"\r\n\r\n    const response = await request.json();\r\n    if (response === 0) {\r\n      setEndDate('');\r\n      alert(\"No hay habitaciones disponibles para esas fechas\");\r\n    }\r\n  };\r\n\r\n  const handleVolver = () => {\r\n    window.history.back();\r\n  };\r\n\r\n  \r\n\r\n  return (\r\n    <div className=\"bodyReserva\">\r\n      <div>\r\n        {typeof hotelData === 'undefined' ? (\r\n          <>CARGANDO...</>\r\n        ) : (\r\n          <div className=\"container45\" onLoad={Verificacion}>\r\n            <div className=\"informacion\">\r\n              <div className=\"cuadroImag\"><img src={hotelData.images} alt={hotelData.name} className=\"tamanoImag\" /></div>\r\n              <div className=\"descripcion\">{hotelData.description}</div>\r\n            </div>\r\n            <div className=\"reserva-form\">\r\n              <h6>Realice reserva del Hotel</h6>\r\n              <h6>{hotelData[\"nombre\"]}</h6>\r\n              <form onSubmit={handleReserva}>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"fechaInicio\">Fecha de inicio:</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    id=\"fechaInicio\"\r\n                    value={startDate}\r\n                    onChange={handleStartDateChange}\r\n                    required\r\n                  />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"fechaFin\">Fecha de fin:</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    id=\"fechaFin\"\r\n                    value={endDate}\r\n                    onChange={handleEndDateChange}\r\n                    required\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <button type=\"submit\" className=\"confReserva\">Confirmar</button>\r\n                  <button type=\"button\" className=\"confReserva\" onClick={handleVolver}>Volver</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <ToastContainer/>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default ReservaPage;",["74"],"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/login/login_admin.jsx",["75"],[],"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/login/Register_cliente.jsx",["76","77","78","79","80","81"],[],"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/login/login_cliente.jsx",["82","83"],[],"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/editar_hoteles.jsx",["84","85","86","87"],[],"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/App.js",[],[],"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/index.js",[],[],"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/insert_hoteles.jsx",["88","89","90","91","92"],[],"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/ver_hoteles.jsx",["93","94"],[],"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/ver_clientes.jsx",[],[],"/Users/mateonegri/Developer/ArqSW2/UCC-as2-final/frontend/client/src/pages/ver_reservas.jsx",["95"],[],{"ruleId":"96","severity":1,"message":"97","line":8,"column":7,"nodeType":"98","messageId":"99","endLine":8,"endColumn":13},{"ruleId":"96","severity":1,"message":"100","line":15,"column":10,"nodeType":"98","messageId":"99","endLine":15,"endColumn":21},{"ruleId":"96","severity":1,"message":"101","line":15,"column":23,"nodeType":"98","messageId":"99","endLine":15,"endColumn":37},{"ruleId":"96","severity":1,"message":"102","line":20,"column":9,"nodeType":"98","messageId":"99","endLine":20,"endColumn":17},{"ruleId":"103","severity":1,"message":"104","line":130,"column":6,"nodeType":"105","endLine":130,"endColumn":8,"suggestions":"106"},{"ruleId":"107","replacedBy":"108"},{"ruleId":"96","severity":1,"message":"109","line":18,"column":10,"nodeType":"98","messageId":"99","endLine":18,"endColumn":18},{"ruleId":"96","severity":1,"message":"110","line":1,"column":17,"nodeType":"98","messageId":"99","endLine":1,"endColumn":26},{"ruleId":"96","severity":1,"message":"111","line":11,"column":10,"nodeType":"98","messageId":"99","endLine":11,"endColumn":22},{"ruleId":"96","severity":1,"message":"112","line":11,"column":24,"nodeType":"98","messageId":"99","endLine":11,"endColumn":39},{"ruleId":"96","severity":1,"message":"113","line":12,"column":10,"nodeType":"98","messageId":"99","endLine":12,"endColumn":25},{"ruleId":"96","severity":1,"message":"114","line":12,"column":27,"nodeType":"98","messageId":"99","endLine":12,"endColumn":45},{"ruleId":"96","severity":1,"message":"115","line":13,"column":17,"nodeType":"98","messageId":"99","endLine":13,"endColumn":25},{"ruleId":"96","severity":1,"message":"116","line":6,"column":26,"nodeType":"98","messageId":"99","endLine":6,"endColumn":31},{"ruleId":"96","severity":1,"message":"109","line":44,"column":10,"nodeType":"98","messageId":"99","endLine":44,"endColumn":18},{"ruleId":"96","severity":1,"message":"97","line":11,"column":7,"nodeType":"98","messageId":"99","endLine":11,"endColumn":13},{"ruleId":"96","severity":1,"message":"117","line":33,"column":7,"nodeType":"98","messageId":"99","endLine":33,"endColumn":19},{"ruleId":"96","severity":1,"message":"118","line":68,"column":15,"nodeType":"98","messageId":"99","endLine":68,"endColumn":23},{"ruleId":"96","severity":1,"message":"119","line":205,"column":11,"nodeType":"98","messageId":"99","endLine":205,"endColumn":25},{"ruleId":"96","severity":1,"message":"110","line":1,"column":29,"nodeType":"98","messageId":"99","endLine":1,"endColumn":38},{"ruleId":"96","severity":1,"message":"120","line":28,"column":10,"nodeType":"98","messageId":"99","endLine":28,"endColumn":15},{"ruleId":"96","severity":1,"message":"121","line":28,"column":17,"nodeType":"98","messageId":"99","endLine":28,"endColumn":25},{"ruleId":"96","severity":1,"message":"122","line":29,"column":10,"nodeType":"98","messageId":"99","endLine":29,"endColumn":16},{"ruleId":"96","severity":1,"message":"123","line":29,"column":18,"nodeType":"98","messageId":"99","endLine":29,"endColumn":27},{"ruleId":"96","severity":1,"message":"124","line":9,"column":12,"nodeType":"98","messageId":"99","endLine":9,"endColumn":19},{"ruleId":"96","severity":1,"message":"125","line":13,"column":12,"nodeType":"98","messageId":"99","endLine":13,"endColumn":23},{"ruleId":"96","severity":1,"message":"126","line":14,"column":15,"nodeType":"98","messageId":"99","endLine":14,"endColumn":22},"no-unused-vars","'Cookie' is assigned a value but never used.","Identifier","unusedVar","'idHotelEdit' is assigned a value but never used.","'setIdHotelEdit' is assigned a value but never used.","'navigate' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'hotelData', 'hotelId', and 'idHotel'. Either include them or remove the dependency array.","ArrayExpression",["127"],"no-new-object",["128"],"'userData' is assigned a value but never used.","'useEffect' is defined but never used.","'clienteEmail' is assigned a value but never used.","'setClienteEmail' is assigned a value but never used.","'clienteUsername' is assigned a value but never used.","'setClienteUsername' is assigned a value but never used.","'setError' is assigned a value but never used.","'toast' is defined but never used.","'notifyDelete' is assigned a value but never used.","'response' is assigned a value but never used.","'handleAmenitie' is assigned a value but never used.","'Email' is assigned a value but never used.","'setEmail' is assigned a value but never used.","'Nombre' is assigned a value but never used.","'setNombre' is assigned a value but never used.","'isEmpty' is defined but never used.","'isJSONEmpty' is defined but never used.","'reserva' is assigned a value but never used.",{"desc":"129","fix":"130"},"no-object-constructor","Update the dependencies array to be: [hotelData, hotelId, idHotel]",{"range":"131","text":"132"},[3553,3555],"[hotelData, hotelId, idHotel]"]